#!/usr/bin/env bash
set -e

BUILD_DIR="build"
INSTALL_DIR="$BUILD_DIR/install"

mkdir -p "$BUILD_DIR"
cd "$BUILD_DIR"

# Configure, build, and install
cmake .. -DCMAKE_INSTALL_PREFIX="$INSTALL_DIR"
cmake --build . --config Release
cmake --install . --config Release

echo
echo "========================="
echo "C-Script (cpps) build & install complete!"
echo
echo "Include path for headers: $INSTALL_DIR/include"
echo "Library path for linking:  $INSTALL_DIR/lib"
echo
echo "Example usage with g++:"
echo "g++ -std=c++20 -I $INSTALL_DIR/include -L $INSTALL_DIR/lib -lcpps your_main.cpp -o your_app"
echo "========================="
